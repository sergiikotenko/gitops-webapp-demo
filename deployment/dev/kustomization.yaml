apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- namespace.yaml
- deployment.yaml
- service.yaml
namespace: demo-dev
images:
- name: gitops-webapp
  newName: uuvtqd/gitops-webapp
  newTag: 20069016337a798074456bbee02c96f4c65dbb69
- name: uuvtqd/gitops-webapp
  newTag: 1d0a3ef201d6d996f16b5fb30ea4d17838da9388

# Not all Resources or fields support strategic merge patches. 
# To support modifying arbitrary fields in arbitrary Resources, 
# Kustomize offers applying JSON patch through patchesJson6902. 
# https://kubectl.docs.kubernetes.io/pages/reference/kustomize.html

patchesJson6902:
- path: modify_port.yaml
  target:
    group: apps
    kind: Deployment
    name: gitops-webapp
    version: v1
